import{r as g,a as k,s as C,E as $}from"./B_gWlXuQ.js";import{E as L}from"./BSOhkihc.js";import"./nUV19QSN.js";import{_ as D,f as S,r as l,o as m,c as y,a as s,t as O,b as o,w,p as E,e as B,k as F,l as v,v as V,x as M,g as b,m as f,i as c}from"./Bq77BlN_.js";/* empty css        */import{E as R}from"./Dg4Uzw2U.js";import"./Dhnu2qvC.js";import{r as h}from"./hEtpEGNC.js";import{L as N}from"./DEvriCr5.js";import{E as z,A as j}from"./BzA_K0q1.js";import{F as U}from"./w-81kyPI.js";import"./CUYW8zDF.js";import"./Co8Oxmti.js";import"./Bp3YSIOJ.js";import"./BJGnmqG5.js";import"./CSi15Dr6.js";import"./DZgb1j3C.js";import"./C_5h5fBQ.js";import"./DDKaLnTg.js";import"./BQSRTtAl.js";import"./CVumo1Vz.js";import"./kwRPCTkg.js";import"./Cq9Fpw4b.js";import"./DozTxQ4h.js";import"./Cz4HgUVE.js";import"./Ox_rbgz0.js";import"./BSgBYroO.js";import"./o6r4Vgvw.js";import"./E5P-NQ8u.js";import"./l0sNRNKZ.js";const q=S({components:{Refresh:g,Check:k,Select:C},props:{folder:{type:Object,default:null}},async asyncData(){return{}},methods:{onRefresh(){this.$emit("onRefreshItems",{})},onSetAllReaded(){this.$emit("onSetAllReaded",{})}}},"$FoOghomfAA"),G=e=>(E("data-v-19f25b60"),e=e(),B(),e),H={style:{display:"flex"}},J={class:"page_root_title"},K=G(()=>s("div",{style:{flex:"1"}},null,-1)),P={style:{"margin-top":"15px"}};function Q(e,t,n,p,r,u){const a=l("Check"),i=$,_=l("Refresh"),I=L;return m(),y("div",null,[s("div",H,[s("span",J,O(e.folder==null?"-":e.folder.folder_name),1),K,s("div",P,[s("div",{onClick:t[0]||(t[0]=(...d)=>e.onSetAllReaded&&e.onSetAllReaded(...d)),class:"svg_icon_container"},[o(i,{size:28},{default:w(()=>[o(a)]),_:1})]),s("div",{onClick:t[1]||(t[1]=(...d)=>e.onRefresh&&e.onRefresh(...d)),class:"svg_icon_container"},[o(i,{size:28},{default:w(()=>[o(_)]),_:1})])])]),o(I)])}const A=D(q,[["render",Q],["__scopeId","data-v-19f25b60"]]),T=S({components:{Loading:N,FolderBar:A,EmptyFolder:z,FeedItemListV3:U,AllDoneFolder:j},async asyncData(){return{folder:null,folderID:b().params.folder_id,viewState:1,showAllFeedItem:!1}},mounted(){this.loadFolder()},methods:{async loadFolder(){let e=await h.getFolderMeta(!1,f.getDeviceID(),this.folderID);c.isResultOk(e)&&(this.folder=e.data),this.loadFeedItems("0",30,0)},async loadFeedItems(e,t,n){let p=1;this.showAllFeedItem&&(p=0);let r=await h.getUserFeedItemListByFolder(f.getDeviceID(),this.folderID,e,p,t,n);if(!c.isResultOk(r)){R.error("文章列表加载失败，请检查网络或稍后再试。");return}let u=parseInt(e),a=r.data.list;r.data.total_count==0&&u==0?this.checkFeedCount():(await this.$refs.feedItemListComp.appendFeedItems(a),this.viewState=4)},async checkFeedCount(){let e=await h.getFolderCount(!1,f.getDeviceID(),[this.folderID]);if(c.isResultOk(e)){let t=e.data;if(t.length==1){let n=t[0].feed_count;this.viewState=n==0?2:3;return}}this.viewState=2},onRefreshFeedItems(){this.viewState=1,window.location.reload()},async onSetAllReaded(){let e=await h.setFolderAllRead(f.getDeviceID(),this.folderID,2);if(!c.isResultOk(e)){R.error("标记为已读失败，请稍后再试。");return}this.viewState=3},viewAllFeedItem(){this.viewState=1,this.showAllFeedItem=!0,this.loadFeedItems(1)},async onReload(){window.location.reload()},onLoadMore(e){this.loadFeedItems(e.feedItemID,e.limit,0)}}},"$RERymwjBm8"),W={class:"page_root_container"};function X(e,t,n,p,r,u){const a=A,i=l("Loading"),_=l("EmptyFolder"),I=l("AllDoneFolder"),d=l("FeedItemListV3");return m(),y("div",W,[o(a,{onOnSetAllReaded:e.onSetAllReaded,onOnRefreshItems:e.onRefreshFeedItems,folder:e.folder},null,8,["onOnSetAllReaded","onOnRefreshItems","folder"]),e.viewState==1?(m(),F(i,{key:0})):v("",!0),e.viewState==2?(m(),F(_,{key:1,folder:e.folder},null,8,["folder"])):v("",!0),e.viewState==3?(m(),F(I,{key:2,onViewAllFeedItem:e.viewAllFeedItem},null,8,["onViewAllFeedItem"])):v("",!0),V(o(d,{onOnLoadMore:e.onLoadMore,onOnReload:e.onReload,ref:"feedItemListComp"},null,8,["onOnLoadMore","onOnReload"]),[[M,e.viewState==4]])])}const ke=D(T,[["render",X]]);export{ke as default};
