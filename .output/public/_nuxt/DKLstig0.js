import{r as C,E as k,D as N,a as j}from"./6YvAUdkK.js";import"./Dgw27TLR.js";/* empty css        */import{_ as y,f as v,o as p,c as w,r as l,a as t,b as s,w as c,d as b,t as g,h as _,i as u,v as q,x as W,j as X,k as A,l as h,m as S,p as Z,e as H}from"./C-CnRt1-.js";import{E as x}from"./QlK9m9KZ.js";import{r as L}from"./BsnG2o04.js";import{r as D}from"./B5cJlPgj.js";import{L as Q}from"./CO8DLequ.js";import{E}from"./CEsXEh1n.js";import{E as z,A as O}from"./DDzqUooj.js";import{F as T}from"./CJn9QyJh.js";import"./Bj0pkxMM.js";import"./Bp3YSIOJ.js";import"./B0qXuZwe.js";import"./D0VbZ-8h.js";import"./CX7TpRRJ.js";import"./B6AwB7wT.js";import"./DV5L49Kp.js";import"./Bq-MUUjw.js";import"./Cq9Fpw4b.js";import"./CzGcHTJI.js";import"./vUDLb0_s.js";import"./COMkZ_HI.js";import"./E5P-NQ8u.js";import"./l0sNRNKZ.js";const U=v({async asyncData(){return{}},methods:{}},"$WntwAQZIMM");function Y(e,o,f,r,n,m){return p(),w("div")}const G=y(U,[["render",Y]]),J=v({components:{Refresh:C,EmptyFolder:z,AddRssWhite:O},props:{folder:{type:Object,default:null}},async asyncData(){return{}},methods:{addFeedClick(){window.location.href="/feed/website/ft/1.html"}}},"$CCtoHZqa9Y"),K={style:{display:"flex"}},P={style:{"max-width":"800px",margin:"0px auto"}},ee={style:{"text-align":"center","margin-top":"100px"}},te=t("p",{style:{"margin-bottom":"0px","font-size":"30px"}},"尚无更新",-1),oe=t("p",{style:{"margin-top":"0px","margin-bottom":"20px"}},"这个内容源还没有发布任何文章，请您静待佳音。",-1);function se(e,o,f,r,n,m){const i=l("EmptyFolder"),a=k,d=l("AddRssWhite"),$=E;return p(),w("div",K,[t("div",P,[t("div",ee,[s(a,{size:100},{default:c(()=>[s(i)]),_:1}),te,oe,s($,{onClick:o[0]||(o[0]=R=>e.addFeedClick()),type:"primary",size:"large"},{default:c(()=>[s(a,{size:18,style:{color:"#fff"}},{default:c(()=>[s(d)]),_:1}),b(" 订阅其它内容源")]),_:1})])])])}const ne=y(J,[["render",se]]),ie=v({components:{Refresh:C,EmptyFolder:z,AddRssWhite:O,Files:N},props:{folder:{type:Object,default:null}},async asyncData(){return{}},methods:{viewAllFeedItem(){this.$emit("viewAllFeedItem",{})}}},"$kbvp5nqvAa"),ae={style:{display:"flex"}},de={style:{"max-width":"800px",margin:"0px auto"}},le={style:{"text-align":"center","margin-top":"10px"}},re=t("img",{src:"https://oss-cn-hangzhou.aliyuncs.com/codingsky/hellokit/assets/image/all_done.svg"},null,-1),me=t("p",{style:{"margin-bottom":"0px","font-size":"30px"}},"搞定！",-1),pe=t("p",{style:{"margin-top":"0px","margin-bottom":"20px"}},"太棒了，您已经读完此内容源下所有文章。",-1);function ce(e,o,f,r,n,m){const i=l("Files"),a=k,d=E;return p(),w("div",ae,[t("div",de,[t("div",le,[re,me,pe,s(d,{onClick:e.viewAllFeedItem,type:"primary",size:"large"},{default:c(()=>[s(a,{size:18,style:{color:"#fff"}},{default:c(()=>[s(i)]),_:1}),b(" 浏览所有文章")]),_:1},8,["onClick"])])])])}const fe=y(ie,[["render",ce]]),_e=v({components:{Refresh:C,FeedItemList3:T,Loading:Q,EmptyFeed:ne,ErrorView:G,AllDoneFeed:fe,Check:j},async asyncData(){let e,o,r=X().params.feed_id,n=null,m=([e,o]=A(()=>L.queryFeedByIDs(!0,[r])),e=await e,o(),e);h.isResultOk(m)&&m.data.list.length==1&&(n=m.data.list[0]);let i=0,a=0,d=([e,o]=A(()=>L.queryFeedStaticsByIDs(!0,[r])),e=await e,o(),e);return h.isResultOk(d)&&d.data.length==1&&(i=d.data[0].follow_count,a=d.data[0].feed_item_count),{feed:n,feedItems:[],followCount:i,feedItemCount:a,viewState:1,showAllFeedItem:!1}},mounted(){this.loadFeedItems("0",30,0)},methods:{async loadFeedItems(e,o,f){if(this.feed==null)return;let r=1;this.showAllFeedItem&&(r=0);let n=await D.getUserFeedItemListByFeed(S.getDeviceID(),this.feed.feed_id,e,r,o,f);if(!h.isResultOk(n)){x.error("文章列表加载失败，请检查网络或稍后再试。");return}let m=n.data.list,i=n.data.total_count;this.feedItemCount==0?this.viewState=3:i==0?this.viewState=4:(await this.$refs.feedItemListComp.appendFeedItems(m),this.viewState=5)},onRefresh(){this.viewState=1,this.$refs.feedItemListComp.clear(),this.$refs.feedItemListComp.setLoadingMoreState(),this.loadFeedItems("0",30,0)},async onSetAllReaded(){let e=await D.setFeedAllRead(S.getDeviceID(),this.feed.feed_id,2);if(!h.isResultOk(e)){x.error("标记为已读失败，请稍后再试。");return}this.viewState=4},viewAllFeedItem(){this.viewState=1,this.showAllFeedItem=!0,this.$refs.feedItemListComp.clear(),this.$refs.feedItemListComp.setLoadingMoreState(),this.loadFeedItems("0",30,0)},onLoadMore(e){this.loadFeedItems(e.feedItemID,e.limit,0)},async onReload(){window.location.reload()}}},"$fanAyX7XeI"),I=e=>(Z("data-v-97990fcb"),e=e(),H(),e),ue={class:"feed_item_conatiner"},he=I(()=>t("div",{style:{height:"30px"}},null,-1)),ye={style:{display:"flex"}},ve={class:"feed_name"},we={class:"feed_info_desc"},Ie=I(()=>t("span",null,"  ｜  ",-1)),$e=I(()=>t("div",{style:{flex:"1"}},null,-1)),Fe={style:{"padding-top":"25px"}},ge=I(()=>t("div",{style:{height:"1px","background-color":"#dcdfe6","margin-top":"10px","margin-bottom":"24px"}},null,-1));function Ce(e,o,f,r,n,m){const i=l("Check"),a=k,d=l("Refresh"),$=l("Loading"),R=l("ErrorView"),V=l("EmptyFeed"),M=l("AllDoneFeed"),B=l("FeedItemList3");return p(),w("div",ue,[he,t("div",ye,[t("div",null,[t("h2",ve,g(e.feed==null?"":e.feed.name),1),t("div",we,[t("span",null,g(e.followCount)+" 位订阅用户",1),Ie,t("span",null,g(e.feedItemCount)+" 篇文章",1)])]),$e,t("div",Fe,[t("div",{onClick:o[0]||(o[0]=(...F)=>e.onSetAllReaded&&e.onSetAllReaded(...F)),class:"svg_icon_container"},[s(a,{size:28},{default:c(()=>[s(i)]),_:1})]),t("div",{onClick:o[1]||(o[1]=(...F)=>e.onRefresh&&e.onRefresh(...F)),class:"svg_icon_container"},[s(a,{size:28},{default:c(()=>[s(d)]),_:1})])])]),ge,e.viewState==1?(p(),_($,{key:0})):u("",!0),e.viewState==2?(p(),_(R,{key:1,ref:"errorViewComp"},null,512)):u("",!0),e.viewState==3?(p(),_(V,{key:2})):u("",!0),e.viewState==4?(p(),_(M,{key:3,onViewAllFeedItem:e.viewAllFeedItem},null,8,["onViewAllFeedItem"])):u("",!0),q(s(B,{showFeedName:!1,onOnLoadMore:e.onLoadMore,onOnReload:e.onReload,ref:"feedItemListComp"},null,8,["onOnLoadMore","onOnReload"]),[[W,e.viewState==5]])])}const Ge=y(_e,[["render",Ce],["__scopeId","data-v-97990fcb"]]);export{Ge as default};
