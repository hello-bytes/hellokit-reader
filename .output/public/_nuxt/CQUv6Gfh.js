import{E as W}from"./CEsXEh1n.js";import{g as H,h as q,E as O,r as G,e as X}from"./6YvAUdkK.js";import{E as ee}from"./BMjuSXxo.js";import{E as te}from"./DV5L49Kp.js";import"./Dgw27TLR.js";import"./qEGfapCy.js";import"./l0sNRNKZ.js";import{_ as I,f as N,j,k as x,l as F,m as E,r as v,o as h,c as g,a as t,t as m,v as V,x as K,s as T,F as oe,n as se,i as U,h as M,w as p,b as a,d as L,p as B,e as A,q as ne}from"./C-CnRt1-.js";import{r as D}from"./BsnG2o04.js";import{r as P}from"./B5cJlPgj.js";import{e as z}from"./E5P-NQ8u.js";import{P as J}from"./DB8_Zr74.js";/* empty css        */import{E as de,A as ae}from"./DDzqUooj.js";const ie=N({components:{Pager:J,FolderAdd:H,FolderChecked:q},props:{baseURL:{type:String,default:""}},async asyncData(e){let o,d;const i=j();let f=parseInt(i.params.page);f<1&&(f=1);let s=[],r=[],c=0,l=2,w=0,b="",y="";e.payload.path.indexOf("/feed/website/")>=0?(w=1,b="/feed/website/ft/1.html",y="/feed/website/at/1.html",e.payload.path.indexOf("/feed/website/ft/")>=0&&(l=4)):e.payload.path.indexOf("/feed/wechat/")>=0&&(w=3,b="/feed/wechat/ft/1.html",y="/feed/wechat/at/1.html",e.payload.path.indexOf("/feed/wechat/ft/")>=0&&(l=4));let n=([o,d]=x(()=>D.queryFeedList(w,2,30,(f-1)*30)),o=await o,d(),o);F.isResultOk(n)&&(s=n.data.list,c=n.data.total_count);for(let _ in s)s[_].folderList=[],s[_].feed_item_count=0,s[_].recent_feeditem_count=0,s[_].read_count=0,s[_].follow_count=0,r.push(s[_].feed_id);let R=([o,d]=x(()=>D.queryFeedStaticsByIDs(!0,r)),o=await o,d(),o);if(F.isResultOk(R)){let _=R.data;for(let $ in _)for(let k in s)if(s[k].feed_id==_[$].feed_id){s[k].feed_item_count=_[$].feed_item_count,s[k].recent_feeditem_count=_[$].recent_feeditem_count,s[k].read_count=_[$].read_count,s[k].follow_count=_[$].follow_count;break}}let C=0,S=([o,d]=x(()=>D.queryFeedStaticsByIDs(!0,["0"])),o=await o,d(),o);return F.isResultOk(S)&&S.data.length==1&&(C=S.data[0].feed_item_count),{feeds:s,categoryType:1,feedTimeURL:b,feedItemTimeURL:y,orderType:l,totalCount:c,totalFeedItemCount:C,pageNumber:f,currentSelectFeed:null}},mounted(){this.fetchFeedFolder(),z.on("on_feed_folder_update",e=>{this.onFeedFolderUpdate(e)})},methods:{async fetchFeedFolder(){if(this.feeds==null)return;let e=[];for(let i in this.feeds)e.push(this.feeds[i].feed_id);let o=await P.getFolderIDByFeedIDs(E.getDeviceID(),e);if(F.isResultOk(o)){let i=o.data;for(let f in i)for(var d in this.feeds)this.feeds[d].feed_id==i[f].feed_id&&(this.feeds[d].folderList=i[f].user_folder_list)}},async onFeedFolderUpdate(e){let o=e.feed.feed_id,d=await P.getFolderIDByFeedIDs(E.getDeviceID(),[o]);if(F.isResultOk(d))for(var i in this.feeds)this.feeds[i].feed_id==o&&(d.data.length==1?this.feeds[i].folderList=d.data[0].user_folder_list:this.feeds[i].folderList=[])},onSubscribeClick(e){z.emit("on_popup_selectfolder",{currentFeed:e,action:1})},onFeedClick(e){z.emit("on_popup_feed",{feed:e})},wrapCountDisplay(e){return e<1e3?e:e<1e3*1e3?(e/1e3).toFixed(2)+"K":e<1e3*1e3*1e3?(e/(1e3*1e3)).toFixed(2)+"M":e<1e3*1e3*1e3*1e3?(e/(1e3*1e3*1e3)).toFixed(2)+"B":"Infinity"}}},"$zKFTcbzQHc"),u=e=>(B("data-v-56ca514b"),e=e(),A(),e),le={style:{display:"flex","margin-top":"10px"}},ce={style:{flex:"1"}},re={style:{display:"flex","align-items":"center","justify-content":"center","text-align":"right"}},_e=["href"],fe=u(()=>t("span",null,"  ",-1)),pe=["href"],he={class:"feed_container_top"},ue=["src"],me={style:{flex:"1","margin-left":"10px"}},we=["onClick"],be=u(()=>t("br",null,null,-1)),ye=["href"],ve={class:"feed_desc"},ge={style:{display:"flex","padding-left":"50px","margin-top":"15px"}},Fe={class:"feed_counter"},Ce=u(()=>t("p",null,"订阅",-1)),$e=u(()=>t("div",{style:{flex:"1"}},null,-1)),ke={class:"feed_counter"},Ie=u(()=>t("p",null,"累计阅读",-1)),Re=u(()=>t("div",{style:{flex:"1"}},null,-1)),xe={class:"feed_counter"},De=u(()=>t("p",null,"文章",-1)),Te=u(()=>t("div",{style:{flex:"1"}},null,-1)),Le={class:"feed_counter"},Se=u(()=>t("p",null,"最近更新",-1));function Ue(e,o,d,i,f,s){const r=v("FolderAdd"),c=O,l=W,w=v("FolderChecked"),b=te,y=v("Pager");return h(),g("div",null,[t("div",le,[t("p",ce,"共 "+m(e.totalCount)+" 个订阅源。",1),V(t("div",re,[t("a",{class:T(["order_link",{order_link_actived:e.orderType==4}]),href:e.feedTimeURL},"按时间排序",10,_e),fe,t("a",{class:T(["order_link",{order_link_actived:e.orderType==2}]),href:e.feedItemTimeURL},"按最近更新",10,pe)],512),[[K,e.totalCount>0]])]),(h(!0),g(oe,null,se(e.feeds,(n,R)=>(h(),g("div",{key:R,class:"feed_container"},[t("div",he,[t("img",{src:n.icon_url},null,8,ue),t("div",me,[t("a",{class:"feed_name",onClick:C=>e.onFeedClick(n)},m(n.name),9,we),be,t("a",{class:"feed_url",href:n.url},m(n.url),9,ye),t("p",ve,m(n.desc),1)]),t("div",null,[U("",!0),n.folderList.length==0?(h(),M(l,{key:1,onClick:C=>e.onSubscribeClick(n)},{default:p(()=>[a(c,{size:16},{default:p(()=>[a(r)]),_:1}),L(" 订阅")]),_:2},1032,["onClick"])):U("",!0),n.folderList.length>0?(h(),M(b,{key:2,effect:"dark",content:"取消订阅或转移至其它目录",placement:"right"},{default:p(()=>[a(l,{onClick:C=>e.onSubscribeClick(n)},{default:p(()=>[a(c,{size:16},{default:p(()=>[a(w)]),_:1}),L(" 修改")]),_:2},1032,["onClick"])]),_:2},1024)):U("",!0)])]),t("div",ge,[t("div",Fe,[t("p",null,m(e.wrapCountDisplay(n.follow_count)),1),Ce]),$e,t("div",ke,[t("p",null,m(e.wrapCountDisplay(n.read_count)),1),Ie]),Re,t("div",xe,[t("p",null,m(e.wrapCountDisplay(n.feed_item_count)),1),De]),Te,t("div",Le,[t("p",null,m(e.wrapCountDisplay(n.recent_feeditem_count)),1),Se])])]))),128)),V(a(y,{baseURL:e.baseURL,activeIndex:e.pageNumber,totalCount:e.totalCount},null,8,["baseURL","activeIndex","totalCount"]),[[K,e.totalCount>0]])])}const Q=I(ie,[["render",Ue],["__scopeId","data-v-56ca514b"]]),ze={},Oe={t:"1733322725058",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7355",width:"256",height:"256"},Ne=t("path",{d:"M1000 341.33333334H24c-13.2 0-24 10.8-24 24v456c0 53 43 96 96 96h832c53 0 96-43 96-96V365.33333334c0-13.2-10.8-24-24-24zM640 741.33333334c0 10.6-5.4 16-16 16H208c-10.6 0-16-5.4-16-16v-32c0-10.6 5.4-16 16-16h416c10.6 0 16 5.4 16 16v32z m192-192c0 10.6-5.4 16-16 16H208c-10.6 0-16-5.4-16-16v-32c0-10.6 5.4-16 16-16h608c10.6 0 16 5.4 16 16v32z m96-528H96C43 21.33333334 0 64.33333334 0 117.33333334v136c0 13.2 10.8 24 24 24h976c13.2 0 24-10.8 24-24V117.33333334c0-53-43-96-96-96z m-480 192c-35.4 0-64-28.6-64-64s28.6-64 64-64 64 28.6 64 64-28.6 64-64 64z m192 0c-35.4 0-64-28.6-64-64s28.6-64 64-64 64 28.6 64 64-28.6 64-64 64z m192 0c-35.4 0-64-28.6-64-64s28.6-64 64-64 64 28.6 64 64-28.6 64-64 64z","p-id":"7356"},null,-1),Be=[Ne];function Ae(e,o){return h(),g("svg",Oe,Be)}const Ee=I(ze,[["render",Ae]]),Ve={},Ke={t:"1733407356020",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17729",width:"256",height:"256"},Me=t("path",{d:"M526.44219259 79.21967408c-269.06168889 0-488.00047408 178.64628148-488.00047407 398.19188147 0 117.23662222 61.77374815 226.22056297 170.3936 301.95105186l-31.67573334 132.40699259c-3.76225185 10.43721482-0.84954075 22.08805925 7.52450371 29.36983703 4.97588148 4.49042963 11.40811852 6.79632592 17.96171852 6.79632594 4.12634075 0 8.25268148-0.9709037 12.13629629-2.91271112l155.95140741-90.65813333c50.85108148 14.0781037 103.27988148 21.11715555 155.95140741 21.11715556 269.06168889 0 488.00047408-178.64628148 488.00047407-398.19188149-0.24272592-219.5456-219.06014815-398.07051852-488.2432-398.07051851zM352.04361482 493.55282963c-34.70980741 0-62.98737778-28.15620741-62.98737779-62.98737778 0-34.70980741 28.15620741-62.98737778 62.98737779-62.98737777 34.70980741 0 62.98737778 28.15620741 62.98737777 62.98737777-0.12136297 34.83117037-28.27757037 62.98737778-62.98737777 62.98737778z m365.05979259 0c-34.70980741 0-62.98737778-28.15620741-62.98737778-62.98737778 0-34.70980741 28.15620741-62.98737778 62.98737778-62.98737777 34.70980741 0 62.98737778 28.15620741 62.98737777 62.98737777-0.12136297 34.83117037-28.27757037 62.98737778-62.98737777 62.98737778z","p-id":"17730"},null,-1),Pe=[Me];function We(e,o){return h(),g("svg",Ke,Pe)}const He=I(Ve,[["render",We]]),qe=N({components:{Refresh:G,EmptyFolder:de,AddRssWhite:ae,Website:Ee,WechatPublicAccount:He},props:{activeTab:{type:String,default:"website"}},async asyncData(){return{}},methods:{addFeedClick(){window.location.href="/feed/website/ft/1.html"}}},"$lYAM4bRrZJ"),Y=e=>(B("data-v-2b79512a"),e=e(),A(),e),je={class:"feeds_tab_container"},Je={href:"/feed/website/ft/1.html"},Qe=Y(()=>t("span",null,"网站",-1)),Ye={href:"/feed/wechat/ft/1.html"},Ze=Y(()=>t("span",null,"微信公众号",-1));function Ge(e,o,d,i,f,s){const r=v("Website"),c=O,l=v("WechatPublicAccount");return h(),g("div",je,[t("a",Je,[t("div",{class:T({feeds_tab_item:e.activeTab!="website",feeds_tab_item_active:e.activeTab=="website"})},[a(c,{width:18},{default:p(()=>[a(r)]),_:1}),Qe],2)]),t("a",Ye,[t("div",{class:T({feeds_tab_item:e.activeTab!="wechat",feeds_tab_item_active:e.activeTab=="wechat"})},[a(c,{width:18},{default:p(()=>[a(l)]),_:1}),Ze],2)])])}const Xe=I(qe,[["render",Ge],["__scopeId","data-v-2b79512a"]]),et=N({components:{Search:X,Pager:J,FolderAdd:H,FolderChecked:q,FeedsTab:Xe,FeedList:Q},async asyncData(e){let o,d;const i=j();parseInt(i.params.page);let f=0,s=0,r=([o,d]=x(()=>D.queryFeedStaticsByIDs(!0,["0"])),o=await o,d(),o);F.isResultOk(r)&&r.data.length==1&&(s=r.data[0].feed_item_count);let c="";e.payload.path.indexOf("/feed/website/")>=0?c="website":e.payload.path.indexOf("/feed/wechat/")>=0&&(c="wechat");let l="";return e.payload.path.indexOf("/feed/website/at")>=0?l="/feed/website/at":e.payload.path.indexOf("/feed/website/ft")>=0?l="/feed/website/ft":e.payload.path.indexOf("/feed/wechat/at")>=0?l="/feed/wechat/at":e.payload.path.indexOf("/feed/wechat/ft")>=0&&(l="/feed/wechat/ft"),{baseURL:l,searchFeedName:"",totalCount:f,activeTab:c,totalFeedItemCount:s}},mounted(){},methods:{onSearchClick(){window.location.href="/feed/search/"+this.searchFeedName},onImportRss(){window.location.href="/import"},onInputKeyDown(e){this.searchFeedName.length==0||(window.location.href="/feed/search/"+this.searchFeedName)}}},"$8EHUO8mAMy"),Z=e=>(B("data-v-5cd8bed8"),e=e(),A(),e),tt={style:{height:"50px","border-bottom":"1px solid rgba(0, 0, 0, .05)"}},ot={class:"center_content_wrapper",style:{"margin-top":"13px","text-align":"right"}},st={style:{width:"800px",margin:"0px auto","padding-top":"30px"}},nt=Z(()=>t("h2",{style:{"margin-top":"38px"}},"搜索您想看的频道",-1)),dt=Z(()=>t("div",{style:{height:"40px"}},null,-1));function at(e,o,d,i,f,s){const r=W,c=v("FeedsTab"),l=v("Search"),w=O,b=ee,y=Q;return h(),g("div",null,[t("div",tt,[t("div",ot,[a(r,{type:"primary",onClick:e.onImportRss},{default:p(()=>[L("导入订阅源")]),_:1},8,["onClick"])])]),t("div",st,[a(c,{activeTab:e.activeTab},null,8,["activeTab"]),nt,a(b,{modelValue:e.searchFeedName,"onUpdate:modelValue":o[0]||(o[0]=n=>e.searchFeedName=n),onKeyup:ne(e.onInputKeyDown,["enter","native"]),size:"large",placeholder:"",class:"input-with-select"},{append:p(()=>[a(r,{onClick:e.onSearchClick},{default:p(()=>[a(w,null,{default:p(()=>[a(l)]),_:1}),L("  搜索")]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup"]),a(y,{baseURL:e.baseURL},null,8,["baseURL"])]),dt])}const gt=I(et,[["render",at],["__scopeId","data-v-5cd8bed8"]]);export{gt as _};
