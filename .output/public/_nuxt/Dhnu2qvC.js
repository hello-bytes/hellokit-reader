import{i as d,m as g}from"./Bq77BlN_.js";/*! js-cookie v3.0.5 | MIT */function u(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var s in c)e[s]=c[s]}return e}var v={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function a(e,t){function c(i,r,n){if(!(typeof document>"u")){n=u({},t,n),typeof n.expires=="number"&&(n.expires=new Date(Date.now()+n.expires*864e5)),n.expires&&(n.expires=n.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var f in n)n[f]&&(o+="; "+f,n[f]!==!0&&(o+="="+n[f].split(";")[0]));return document.cookie=i+"="+e.write(r,i)+o}}function s(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var f=r[o].split("="),l=f.slice(1).join("=");try{var p=decodeURIComponent(f[0]);if(n[p]=e.read(l,p),i===p)break}catch{}}return i?n[i]:n}}return Object.create({set:c,get:s,remove:function(i,r){c(i,"",u({},r,{expires:-1}))},withAttributes:function(i){return a(this.converter,u({},this.attributes,i))},withConverter:function(i){return a(u({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var h=a(v,{path:"/"});const k={isUserMode(e,t){return d.getUserToken().length>0},isDeviceMode(e,t){return d.getUserToken().length==0},getNickName(){let e=d.getMst();return e==null?"":e.n!=null&&e.n.length>0?e.n:""},async getWxLoginURL(){return d.postClientJsonAsync("/api/tbs/wechat/login-qrcode",{device_id:g.getDeviceID()})},async fetchWxLoginState(e){return d.postClientJsonAsync("/api/tbs/wechat/login-state-fetch",{ticket:e})},saveAuthWithWxCookie(e,t,c,s,i,r){this._saveToken(e,t,c,s,i,r)},_saveToken(e,t,c,s,i,r){var n="",o=window.location.href.toString();o.indexOf("codingsky.com")>0?n=".codingsky.com":o.indexOf("tuboshu.mobi")>0?n=".tuboshu.mobi":o.indexOf("androidos.net.cn")>0?n=".androidos.net.cn":o.indexOf("hellokit.com.cn")>0?n=".hellokit.com.cn":o.indexOf("hellobit.com.cn")>0?n=".hellobit.com.cn":o.indexOf("helloandroid.cn")>0&&(n=".helloandroid.cn");let l=JSON.stringify({u:e,t:r,e:s,p:c,n:t,wxid:i});n!=""?h.set("mst",l,{domain:n,expires:30}):h.set("mst",l,{expires:30})},saveLocalUser(e){d.setKVObject("hb.vip.user",e)},async getMyUserInfoWithToken(e){return d.postClientJsonAsyncWithToken("/api/user/v1/token/info",e,{})}};export{k as u};
