import{r as g,a as k,s as C,E as $}from"./6YvAUdkK.js";import{E as L}from"./DHo4l0ZX.js";import"./Dgw27TLR.js";import{_ as D,f as S,r as l,o as m,c as y,a as s,t as O,b as o,w,p as E,e as B,h as F,i as v,v as V,x as M,j as b,m as f,l as c}from"./C-CnRt1-.js";/* empty css        */import{E as R}from"./QlK9m9KZ.js";import{r as h}from"./B5cJlPgj.js";import{L as N}from"./CO8DLequ.js";import{E as j,A as z}from"./i-YIZD07.js";import{F as U}from"./CJn9QyJh.js";import"./Bj0pkxMM.js";import"./Bp3YSIOJ.js";import"./B0qXuZwe.js";import"./D0VbZ-8h.js";import"./CX7TpRRJ.js";import"./B6AwB7wT.js";import"./CEsXEh1n.js";import"./CzGcHTJI.js";import"./DV5L49Kp.js";import"./Bq-MUUjw.js";import"./Cq9Fpw4b.js";import"./vUDLb0_s.js";import"./DDzqUooj.js";import"./BsnG2o04.js";import"./COMkZ_HI.js";import"./E5P-NQ8u.js";import"./l0sNRNKZ.js";const q=S({components:{Refresh:g,Check:k,Select:C},props:{folder:{type:Object,default:null}},async asyncData(){return{}},methods:{onRefresh(){this.$emit("onRefreshItems",{})},onSetAllReaded(){this.$emit("onSetAllReaded",{})}}},"$FoOghomfAA"),G=e=>(E("data-v-19f25b60"),e=e(),B(),e),H={style:{display:"flex"}},J={class:"page_root_title"},K=G(()=>s("div",{style:{flex:"1"}},null,-1)),P={style:{"margin-top":"15px"}};function Q(e,t,n,p,a,u){const r=l("Check"),d=$,_=l("Refresh"),I=L;return m(),y("div",null,[s("div",H,[s("span",J,O(e.folder==null?"-":e.folder.folder_name),1),K,s("div",P,[s("div",{onClick:t[0]||(t[0]=(...i)=>e.onSetAllReaded&&e.onSetAllReaded(...i)),class:"svg_icon_container"},[o(d,{size:28},{default:w(()=>[o(r)]),_:1})]),s("div",{onClick:t[1]||(t[1]=(...i)=>e.onRefresh&&e.onRefresh(...i)),class:"svg_icon_container"},[o(d,{size:28},{default:w(()=>[o(_)]),_:1})])])]),o(I)])}const A=D(q,[["render",Q],["__scopeId","data-v-19f25b60"]]),T=S({components:{Loading:N,FolderBar:A,EmptyFolder:j,FeedItemListV3:U,AllDoneFolder:z},async asyncData(){return{folder:null,folderID:b().params.folder_id,viewState:1,showAllFeedItem:!1}},mounted(){this.loadFolder()},methods:{async loadFolder(){let e=await h.getFolderMeta(!1,f.getDeviceID(),this.folderID);c.isResultOk(e)&&(this.folder=e.data),this.loadFeedItems("0",30,0)},async loadFeedItems(e,t,n){let p=1;this.showAllFeedItem&&(p=0);let a=await h.getUserFeedItemListByFolder(f.getDeviceID(),this.folderID,e,p,t,n);if(!c.isResultOk(a)){R.error("文章列表加载失败，请检查网络或稍后再试。");return}let u=parseInt(e),r=a.data.list;a.data.total_count==0&&u==0?this.checkFeedCount():(await this.$refs.feedItemListComp.appendFeedItems(r),this.viewState=4)},async checkFeedCount(){let e=await h.getFolderCount(!1,f.getDeviceID(),[this.folderID]);if(c.isResultOk(e)){let t=e.data;if(t.length==1){let n=t[0].feed_count;this.viewState=n==0?2:3;return}}this.viewState=2},onRefreshFeedItems(){this.viewState=1,window.location.reload()},async onSetAllReaded(){let e=await h.setFolderAllRead(f.getDeviceID(),this.folderID,2);if(!c.isResultOk(e)){R.error("标记为已读失败，请稍后再试。");return}this.viewState=3},viewAllFeedItem(){this.viewState=1,this.showAllFeedItem=!0,this.loadFeedItems(1)},async onReload(){window.location.reload()},onLoadMore(e){this.loadFeedItems(e.feedItemID,e.limit,0)}}},"$RERymwjBm8"),W={class:"page_root_container"};function X(e,t,n,p,a,u){const r=A,d=l("Loading"),_=l("EmptyFolder"),I=l("AllDoneFolder"),i=l("FeedItemListV3");return m(),y("div",W,[o(r,{onOnSetAllReaded:e.onSetAllReaded,onOnRefreshItems:e.onRefreshFeedItems,folder:e.folder},null,8,["onOnSetAllReaded","onOnRefreshItems","folder"]),e.viewState==1?(m(),F(d,{key:0})):v("",!0),e.viewState==2?(m(),F(_,{key:1,folder:e.folder},null,8,["folder"])):v("",!0),e.viewState==3?(m(),F(I,{key:2,onViewAllFeedItem:e.viewAllFeedItem},null,8,["onViewAllFeedItem"])):v("",!0),V(o(i,{onOnLoadMore:e.onLoadMore,onOnReload:e.onReload,ref:"feedItemListComp"},null,8,["onOnLoadMore","onOnReload"]),[[M,e.viewState==4]])])}const ye=D(T,[["render",X]]);export{ye as default};
